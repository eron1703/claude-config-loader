# Server and Infrastructure Information
# Updated: 2026-02-14
# All Hetzner Cloud servers in eu-central region

servers:

  # === LOCAL DEVELOPMENT ===

  localhost:
    host: localhost
    ip: 127.0.0.1
    purpose: "Local development environment"
    access: "Direct"
    platform: "macOS with OrbStack"
    docker: "OrbStack (NOT Docker Desktop)"
    workspace: "~/projects/"
    notes: |
      - All development happens locally via Docker/OrbStack
      - Multiple users/agents work in parallel
      - NEVER shut down OrbStack service globally
      - Only manage individual containers

  mac-mini:
    host: mac-mini
    ip: "Dynamic (no static IP)"
    purpose: "Personal Mac Mini workstation"
    access: "RustDesk remote desktop (server on dev-01)"
    platform: "macOS"
    remote_access:
      method: "RustDesk"
      rustdesk_server: "dev-01 (65.21.153.235)"
      notes: "RustDesk server runs on dev-01 to manage connection with dynamic IP"
    connection:
      ssh_host: mac-mini
      user: benjaminhippler
      identity_file: ~/.ssh/id_ed25519_macmini
      notes: "Only accessible on local network (192.168.68.x) or via RustDesk"

  # === HETZNER CLOUD SERVERS ===

  dev-01:
    host: dev-01
    ip: 65.21.153.235
    hetzner_name: "dev-01"
    hetzner_type: "CCX23"
    specs: "x86 | 160 GB disk"
    location: "Helsinki (eu-central)"
    purpose: "Development environment + dev tools (Plane, Grafana, monitoring, etc.)"
    access: "SSH via dev-01 or dev-01-root"
    platform: "Linux (K3S Kubernetes)"
    infrastructure:
      kubernetes: "K3S (lightweight Kubernetes) with 60+ pods across 8+ namespaces"
      reverse_proxy: "Nginx on port 80"
      monitoring: "Grafana, Prometheus, Loki stack"
      ci_cd: "GitLab Runner"
      rustdesk: "RustDesk server for Mac Mini remote access"
    services:
      dev_tools:
        - "Plane CE v1.2.1 (project management) - :8083 web, :8012 API"
        - "Grafana/Prometheus/Loki (monitoring) - :3001"
        - "Agent Chat Room - :8099"
        - "claude-pod (K8s namespace) - agent development environment"
      databases:
        - "ArangoDB - :8529 (used by engage, SDX, flowmaster-dev)"
      applications:
        - "SDX MCP Server - :8011 (40 tools)"
        - "SDX Backend - :8010"
        - "SDX Frontend - :3010"
        - "FlowMaster Dev (K3S) - :80 via nginx"
        - "Guard Mobile Backend - :8004"
        - "Employee Backend - :8001"
        - "Employee Frontend - :3001"
    hetzner_firewall:
      enabled: true
      firewall_id: 2269906
      firewall_name: "firewall-1"
      management: "Hetzner Cloud Console or API"
    connection:
      user_ben:
        host: dev-01
        hostname: 65.21.153.235
        user: ben
        port: 22
        identity_file: ~/.ssh/id_ed25519_dev01_ben
        connect: "ssh dev-01"
      user_root:
        host: dev-01-root
        hostname: 65.21.153.235
        user: root
        port: 22
        identity_file: ~/.ssh/id_ed25519_dev01
        connect: "ssh dev-01-root"
      ci_cd_deploy:
        hostname: 65.21.153.235
        user: root
        port: 22
        key_type: ED25519
        credentials: "GitLab CI/CD: SSH_PRIVATE_KEY"
    notes: |
      - Formerly known as "demo-server"
      - Primary dev environment with all dev tooling
      - K3S cluster hosts FlowMaster dev services
      - RustDesk server manages Mac Mini remote connections
      - Plane project management for FlowMaster team

  dev-02:
    host: dev-02
    ip: 65.21.52.58
    hetzner_name: "dev-02"
    hetzner_type: "CCX33"
    specs: "x86 | 8 dedicated CPUs | 240 GB disk"
    location: "Helsinki (eu-central)"
    purpose: "High-performance dev server for agent pods and heavy builds"
    access: "SSH via dev-02"
    platform: "Linux"
    infrastructure:
      notes: "Dedicated to running large numbers of agent pods without CPU ceiling issues"
    services:
      - "Agent pods (Claude Code containers for parallel development)"
      - "Build activities (CI builds that need CPU headroom)"
    connection:
      user_root:
        host: dev-02
        hostname: 65.21.52.58
        user: root
        port: 22
        identity_file: "~/.ssh/id_ed25519_dev02"
        connect: "ssh dev-02"
    notes: |
      - NEW server (added Feb 2026)
      - 8 dedicated CPUs for heavy parallel workloads
      - Dedicated to dev so agent pods don't compete with dev tools on dev-01
      - SSH key may need to be set up (TODO: generate and authorize)

  playground:
    host: playground
    ip: 89.167.2.145
    hetzner_name: "playground"
    hetzner_type: "CX33"
    specs: "x86 | 80 GB disk"
    location: "Helsinki (eu-central)"
    purpose: "Personal pilot/experiment server (Benjamin)"
    access: "SSH via playground"
    platform: "Linux (classic Docker - NO K3S, NO CI/CD)"
    infrastructure:
      runtime: "Docker + Docker Compose (classic, no orchestration)"
      notes: "No K3S, no GitLab CI/CD - manual deployments only"
    connection:
      user_root:
        host: playground
        hostname: 89.167.2.145
        user: root
        port: 22
        identity_file: "~/.ssh/id_ed25519_playground"
        connect: "ssh playground"
    notes: |
      - Personal server for building pilots and experiments
      - Classic Docker setup (not K3S)
      - No CI/CD pipeline - manual deployment only
      - SSH key may need to be set up (TODO: generate and authorize)

  prod-01:
    host: prod-01
    ip: 91.99.237.14
    hetzner_name: "prod-01"
    hetzner_type: "CPX41"
    specs: "x86 | 240 GB + 10 GB disk"
    location: "Nuremberg (eu-central)"
    purpose: "Production - FlowMaster app + company website"
    access: "SSH via prod-01"
    platform: "Linux (Docker Compose)"
    infrastructure:
      runtime: "Docker + Docker Compose"
      web_server: "Nginx (reverse proxy + SSL via Let's Encrypt)"
    services:
      - "FlowMaster Production (app.flow-master.ai)"
      - "Company website (www.flow-master.ai)"
    domains:
      - domain: "app.flow-master.ai"
        purpose: "FlowMaster production application"
      - domain: "www.flow-master.ai"
        purpose: "Company website"
    connection:
      user_ali:
        host: prod-01
        hostname: 91.99.237.14
        user: ali
        port: 22
        identity_file: ~/.ssh/id_ed25519_prod01
        connect: "ssh prod-01"
      ci_cd_deploy:
        hostname: 91.99.237.14
        user: root
        port: 22
        credentials: "GitLab CI/CD: SSH_PRIVATE_KEY"
    notes: |
      - Formerly known as "flowmaster-prod" / "flowmaster-app-server"
      - Production only - no dev/staging environments
      - Old staging/dev server (91.98.159.56) has been decommissioned
      - SSL certificates managed by Let's Encrypt / certbot

# === DECOMMISSIONED ===

decommissioned:
  old-flowmaster-app:
    ip: 91.98.159.56
    former_purpose: "FlowMaster staging + dev environments"
    status: "DECOMMISSIONED (Feb 2026)"
    notes: "Replaced by dev-01 for dev and prod-01 for production"

# === SERVER NAMING CONVENTION ===
#
# dev-XX  = Development servers (dev tools, K3S, builds)
# prod-XX = Production servers
# playground = Personal experimentation
#
# Old names → New names:
#   demo-server      → dev-01
#   demo-server-root → dev-01-root
#   flowmaster-app   → DECOMMISSIONED (91.98.159.56)
#   flowmaster-prod  → prod-01
#
# === QUICK REFERENCE ===
#
# | Server     | IP             | Specs        | Location   | Purpose                          |
# |------------|----------------|--------------|------------|----------------------------------|
# | dev-01     | 65.21.153.235  | CCX23, 160GB | Helsinki   | Dev env + tools (Plane, Grafana) |
# | dev-02     | 65.21.52.58    | CCX33, 240GB | Helsinki   | High-perf dev, agent pods        |
# | playground | 89.167.2.145   | CX33, 80GB   | Helsinki   | Pilots, classic Docker           |
# | prod-01    | 91.99.237.14   | CPX41, 250GB | Nuremberg  | Production app + website         |
# | mac-mini   | Dynamic        | -            | Local      | RustDesk via dev-01              |
